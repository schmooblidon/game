{"version":3,"sources":["webpack:///webpack/bootstrap 3bf6613eaeab28a131fe","webpack:///./js/main.js","webpack:///./js/input.js","webpack:///./js/physics.js","webpack:///./js/player.js","webpack:///./js/render.js","webpack:///./js/utils/Vec.js"],"names":["elem","document","getElementById","params","fullscreen","two","Two","appendTo","p","playing","startPrompt","pauseScreen","console","log","navigator","getGamepads","gameLoop","input","updateInput","s","style","display","setTimeout","start","remove","play","onkeydown","onkeyup","findInput","overrideKeyboardEvent","controllerIndex","lStickX","lStickY","lTrigger","rTrigger","a","angle","magnitude","i","keys","gamepads","gamepad","undefined","axes","Math","abs","buttons","pressed","value","atan2","min","sqrt","pow","length","j","e","keyCode","type","disabledEventPropagation","preventDefault","stopPropagation","event","cancelBubble","physics","acceleration","limit","normalSpeed","minSpeed","maxSpeed","speed","max","friction","angDiff","sin","cos","sign","rotation","vel","x","y","tailLength","pos","colours","wrapped","w","body","clientWidth","h","clientHeight","round","player","PI","ease","tail","Line","stroke","tailGroup","makeGroup","translation","set","width","height","linewidth","noFill","head","makePath","group","noStroke","updateRenderObjects","fill","vertices","Vec"],"mappings":"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","file":"main.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 3bf6613eaeab28a131fe","import {player} from \"./player\";\r\nimport {physics} from \"./physics\";\r\nimport {updateRenderObjects} from \"./render\";\r\nimport {overrideKeyboardEvent, findInput} from \"./input\";\r\n\r\n// setting up renderer\r\nconst elem = document.getElementById(\"game\");\r\nconst params = {fullscreen : true};\r\nexport const two = new Two(params).appendTo(elem);\r\n\r\n// setting up player\r\nexport const p = new player();\r\n\r\n// setting up other variables\r\nlet playing = false;\r\nconst startPrompt = document.getElementById(\"startPrompt\");\r\nconst pauseScreen = document.getElementById(\"pause\");\r\n\r\n// always handy to have this ready to inspect\r\nconsole.log(navigator.getGamepads());\r\n\r\n// defining the game logic loop\r\nfunction gameLoop() {\r\n  // get current input\r\n  p.input.updateInput();\r\n  // if hit start, pause/unpause\r\n  if (p.input.s[0] && !p.input.s[1]) {\r\n    playing ^= true;\r\n    pauseScreen.style.display = playing ? \"none\" : \"block\";\r\n  }\r\n  if (playing) {\r\n    physics(p);\r\n    updateRenderObjects();\r\n  }\r\n  setTimeout(function(){gameLoop()}, 16.666667);\r\n}\r\n\r\n// when page is loaded and it asks for input\r\nfunction start() {\r\n  if (!playing) {\r\n    if (findInput(p)){\r\n      // start game logic and render loops\r\n      playing = true;\r\n      startPrompt.remove();\r\n      gameLoop();\r\n      two.play();\r\n    }\r\n    setTimeout(function(){start()}, 16.6666667);\r\n  }\r\n}\r\n\r\n// overriding keyboard events to disable unwanted events and store properly\r\ndocument.onkeydown = overrideKeyboardEvent;\r\ndocument.onkeyup = overrideKeyboardEvent;\r\n\r\nstart();\n\n\n// WEBPACK FOOTER //\n// ./js/main.js","export function input() {\r\n  this.controllerIndex = -1;\r\n  this.lStickX = [0];\r\n  this.lStickY = [0];\r\n  this.lTrigger = [0];\r\n  this.rTrigger = [0];\r\n  this.a = [false];\r\n  this.s = [false];\r\n\r\n  this.angle = [0];\r\n  this.magnitude = [0];\r\n\r\n  this.updateInput = function() {\r\n    // push inputs back a frame in history\r\n    for (let i=4;i>0;i--) {\r\n      this.lStickX[i] = this.lStickX[i-1];\r\n      this.lStickY[i] = this.lStickY[i-1];\r\n      this.a[i] = this.a[i-1];\r\n      this.lTrigger[i] = this.lTrigger[i-1];\r\n      this.rTrigger[i] = this.rTrigger[i-1];\r\n      this.s[i] = this.s[i-1];\r\n      this.angle[i] = this.angle[i-1];\r\n      this.magnitude[i] = this.magnitude[i-1];\r\n    }\r\n\r\n    // if using keyboard\r\n    if (this.controllerIndex === -1) {\r\n      this.lStickX[0] = ((keys[68] || keys[39]) ? 1 : 0) + ((keys[65] || keys[37]) ? -1 : 0);\r\n      this.lStickY[0] = ((keys[87] || keys[38]) ? 1 : 0) + ((keys[83] || keys[40]) ? -1 : 0);\r\n      this.a[0] = keys[32] || keys[90];\r\n      this.s[0] = keys[13] || keys[80];\r\n    }\r\n    // else if using a gamepad\r\n    else {\r\n      const gamepads = navigator.getGamepads();\r\n      const gamepad = gamepads[this.controllerIndex];\r\n      // if gamepad is unplugged or removed. change to keyboard\r\n      if (gamepad === null || gamepad === undefined) {\r\n        this.controllerIndex = -1;\r\n      }\r\n      else {\r\n        this.lStickX[0] = gamepad.axes[0];\r\n        this.lStickY[0] = gamepad.axes[1] * -1;\r\n        if (Math.abs(this.lStickY[0]) < 0.3 && Math.abs(this.lStickX[0]) < 0.3) {\r\n          this.lStickX[0] = 0;\r\n          this.lStickY[0] = 0;\r\n        }\r\n        this.a[0] = gamepad.buttons[0].pressed;\r\n        this.lTrigger[0] = gamepad.buttons[6].value;\r\n        this.rTrigger[0] = gamepad.buttons[7].value;\r\n        this.s[0] = gamepad.buttons[9].pressed;\r\n      }\r\n    }\r\n\r\n    // calculate new inputs\r\n    this.angle[0] = Math.atan2(this.lStickY[0], this.lStickX[0]);\r\n    this.magnitude[0] = Math.min(1, Math.sqrt(Math.pow(this.lStickX[0], 2) + Math.pow(this.lStickY[0], 2)));\r\n  }\r\n}\r\n\r\nexport function findInput(p) {\r\n  // if enter or space is hit\r\n  if (keys[13] || keys[32]) {\r\n    p.input.controllerIndex = -1;\r\n    return true;\r\n  }\r\n  // else look for a button press on a gamepad\r\n  else {\r\n    const gamepads = navigator.getGamepads();\r\n    for (let i=0;i<gamepads.length;i++) {\r\n      if (gamepads[i] !== null && gamepads[i] !== undefined) {\r\n        for (let j=0;j<gamepads[i].buttons.length;j++) {\r\n          if (gamepads[i].buttons[j].pressed) {\r\n            p.input.controllerIndex = i;\r\n            return true;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return false;\r\n}\r\n\r\nexport const keys = {};\r\n\r\nexport function overrideKeyboardEvent (e){\r\n  // do this for all keys except f5 and f11\r\n  if (e.keyCode != 122 && e.keyCode != 116){\r\n    switch(e.type){\r\n      case \"keydown\":\r\n        if (!keys[e.keyCode]) {\r\n          keys[e.keyCode] = true;\r\n        }\r\n        break;\r\n      case \"keyup\":\r\n        delete(keys[e.keyCode]);\r\n        break;\r\n    }\r\n    disabledEventPropagation(e);\r\n    e.preventDefault();\r\n    return false;\r\n  } else {\r\n    return true;\r\n  }\r\n}\r\n\r\nfunction disabledEventPropagation (e){\r\n  if(e){\r\n    if(e.stopPropagation){\r\n      e.stopPropagation();\r\n    } else if(event){\r\n       event.cancelBubble = true;\r\n    }\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./js/input.js","export function physics(p) {\r\n\r\n  // current acceleration is throttle (rTrigger) plus negative brake (lTrigger), then scaled down to be more intuitive\r\n  p.acceleration = p.input.rTrigger[0] + p.input.lTrigger[0] * -1;\r\n\r\n  // use acceleration as a multiplier for a limit in slow or fast speed for the current frame\r\n  let limit = (p.acceleration < 0) ? p.normalSpeed + (p.minSpeed - p.normalSpeed) * -p.acceleration : p.normalSpeed + (p.maxSpeed - p.normalSpeed) * p.acceleration;\r\n\r\n  // apply realistic scale to acceleration\r\n  p.acceleration *= 0.05;\r\n\r\n  // if accelerating or decelerating. apply acceleration up to calculated min/max speeds\r\n  if (p.acceleration > 0) {\r\n    // if above current limit, conform to limit by friction\r\n    if (p.speed > limit) {\r\n      p.speed = Math.max(p.speed - p.friction, limit);\r\n    }\r\n    // else accelerate up to limit\r\n    else {\r\n      // if going slower than normal speed, accel by friction as well\r\n      if (p.speed < p.normalSpeed) {\r\n        p.speed = Math.min(p.speed + p.acceleration + p.friction, limit);\r\n      }\r\n      else {\r\n        p.speed = Math.min(p.speed + p.acceleration, limit);\r\n      }\r\n    }\r\n  }\r\n  else if (p.acceleration < 0) {\r\n    // if below current limit, conform to limit by friction\r\n    if (p.speed < limit) {\r\n      p.speed = Math.min(p.speed + p.friction, limit);\r\n    }\r\n    // else decelerate down to limit\r\n    else {\r\n      // if going faster than normal speed, decel by friction as well\r\n      if (p.speed > p.normalSpeed) {\r\n        p.speed = Math.max(p.speed + p.acceleration - p.friction, limit);\r\n      }\r\n      else {\r\n        p.speed = Math.max(p.speed + p.acceleration, limit);\r\n      } \r\n    } \r\n  }\r\n  // else, check if above/below normalSpeed and move towards it according to friction\r\n  else {\r\n    if (p.speed > p.normalSpeed) {\r\n      p.speed -= p.friction;\r\n      if (p.speed < p.normalSpeed) {\r\n        p.speed = p.normalSpeed;\r\n      }\r\n    }\r\n    else {\r\n      p.speed += p.friction;\r\n      if (p.speed > p.normalSpeed) {\r\n        p.speed = p.normalSpeed;\r\n      }\r\n    }\r\n  }\r\n\r\n  // find distance between target angle and current angle\r\n  let angDiff = (p.input.angle[0] - p.angle);\r\n \r\n  // make sure distance uses shortest path (check going through -pi / pi breakpoint)\r\n  angDiff = Math.atan2(Math.sin(angDiff), Math.cos(angDiff));\r\n\r\n  // move current angle towards target according to distance with multipliers\r\n\r\n  // this method eases towards the angle, sharp start slow finish\r\n  //p.angle += angDiff * p.ease * p.input.magnitude[0];\r\n\r\n  // this method moves towards the angle at a constant rate, great for circles\r\n  p.angle += Math.sign(angDiff) * Math.min(Math.abs(angDiff), p.rotation) * p.input.magnitude[0];\r\n\r\n  p.vel.x = Math.cos(p.angle) * p.speed;\r\n  p.vel.y = Math.sin(p.angle) * p.speed;\r\n\r\n  for (let i=p.tailLength-1;i>0;i--) {\r\n    p.pos[i].x = p.pos[i-1].x;\r\n    p.pos[i].y = p.pos[i-1].y;\r\n    p.colours[i] = p.colours[i-1];\r\n    p.wrapped[i] = p.wrapped[i-1];\r\n  }\r\n\r\n  p.pos[0].x += p.vel.x;\r\n  p.pos[0].y += p.vel.y;\r\n\r\n  // blastzone wrapping\r\n  const w = document.body.clientWidth + 20;\r\n  const h = document.body.clientHeight + 20;\r\n  p.wrapped[0] = false;\r\n  if (p.pos[0].x > w/2) {\r\n    p.pos[0].x -= w;\r\n    p.wrapped[0] = true;\r\n  }\r\n  else if (p.pos[0].x < -w/2) {\r\n    p.pos[0].x += w;\r\n    p.wrapped[0] = true;\r\n  }\r\n  if (p.pos[0].y > h/2) {\r\n    p.pos[0].y -= h;\r\n    p.wrapped[0] = true;\r\n  }\r\n  else if (p.pos[0].y < -h/2) {\r\n    p.pos[0].y += h;\r\n    p.wrapped[0] = true;\r\n  }\r\n\r\n  // calculating colour between green and red for current frame according to speed\r\n  p.colours[0] = \"rgb(\"+Math.round(Math.max(0, Math.min(255, ((p.maxSpeed-p.speed)/(p.maxSpeed - p.normalSpeed))*255)))+\",\"+Math.round(Math.max(0, Math.min(255, ((p.speed-p.minSpeed)/(p.normalSpeed - p.minSpeed))*255)))+\",0)\";\r\n}\n\n\n// WEBPACK FOOTER //\n// ./js/physics.js","import {Vec} from \"./utils/Vec\";\r\nimport {two} from \"./main\";\r\nimport {input} from \"./input\";\r\n\r\nexport function player() {\r\n  this.pos = [];\r\n  this.colours = [];\r\n\r\n  this.tailLength = 60;\r\n\r\n  for (let i=0;i<this.tailLength;i++) {\r\n    this.pos[i] = new Vec();\r\n    this.colours[i] = \"rgb(255,255,0)\";\r\n  }\r\n  this.vel = new Vec();\r\n  this.angle = Math.PI/2;\r\n  this.speed = 5;\r\n  this.minSpeed = 2;\r\n  this.maxSpeed = 10;\r\n  this.normalSpeed = 5;\r\n  this.acceleration = 0;\r\n  this.friction = 0.1;\r\n\r\n  this.ease = 0.2;\r\n  this.rotation = 0.1;\r\n\r\n  this.input = new input();\r\n\r\n  // this is for a tail as a singular path\r\n  /*this.tail = [];\r\n  for (let i=0;i<this.tailLength-1;i++) {\r\n    this.tail[i] = new Two.Anchor(0, 0, 0, 0, 0, 0, Two.Commands.line);\r\n  }\r\n\r\n  this.tailPath = new Two.Path(this.tail, false, false);\r\n  this.tailGroup = two.makeGroup(this.tailPath);\r\n  this.tailGroup.translation.set(two.width/2, two.height/2);\r\n  this.tailGroup.linewidth = 5;\r\n  this.tailGroup.noFill();*/\r\n\r\n  // this is for a tail with many connected but seperate lines\r\n  this.tail = [];\r\n  this.wrapped = [];\r\n  for (let i=0;i<this.tailLength-1;i++) {\r\n    this.tail[i] = new Two.Line(0, 0, 0, 0);\r\n    this.tail[i].stroke = \"rgb(255,255,0)\";\r\n    this.wrapped[i] = false;\r\n  }\r\n  this.tailGroup = two.makeGroup(this.tail);\r\n  this.tailGroup.translation.set(two.width/2, two.height/2);\r\n  this.tailGroup.linewidth = 5;\r\n  this.tailGroup.noFill();\r\n\r\n  //this.head = two.makeCircle(0, 0, 10);\r\n  this.head = two.makePath(20,0,0,10,-20,0,0,-10,false);\r\n\r\n  this.group = two.makeGroup(this.head);\r\n  this.group.translation.set(two.width/2, two.height/2);\r\n  this.group.rotation = 0;\r\n  this.group.noStroke();\r\n}\n\n\n// WEBPACK FOOTER //\n// ./js/player.js","import {p, two, tail} from \"./main\";\r\n\r\nexport function updateRenderObjects() {\r\n  p.group.translation.set(two.width/2 + p.pos[0].x, two.height/2 + p.pos[0].y * -1);\r\n  p.group.rotation = -p.angle;\r\n  p.group.fill = p.colours[0];\r\n  for (let i=0;i<p.tailLength-1;i++) {\r\n    p.tail[i].vertices[0].x = p.pos[i].x;\r\n    p.tail[i].vertices[0].y = p.pos[i].y * -1;\r\n    if (p.wrapped[i]) {\r\n      p.tail[i].vertices[1].x = p.pos[i].x;\r\n      p.tail[i].vertices[1].y = p.pos[i].y * -1;\r\n    }\r\n    else {\r\n      p.tail[i].vertices[1].x = p.pos[i+1].x;\r\n      p.tail[i].vertices[1].y = p.pos[i+1].y * -1;\r\n    }\r\n    p.tail[i].stroke = p.colours[i+1];\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./js/render.js","export function Vec(x = 0, y = 0){\r\n  this.x = x;\r\n  this.y = y;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./js/utils/Vec.js"],"sourceRoot":""}