{"version":3,"sources":["webpack:///webpack/bootstrap efd4b8095d5eefb01c32","webpack:///./js/main.js","webpack:///./js/player.js","webpack:///./js/utils/Vec.js","webpack:///./js/physics.js","webpack:///./js/render.js","webpack:///./js/input.js"],"names":["elem","document","getElementById","params","fullscreen","two","Two","appendTo","p","playing","startPrompt","console","log","navigator","getGamepads","gameLoop","input","updateInput","setTimeout","start","remove","play","onkeydown","onkeyup","player","pos","vel","head","makeCircle","fill","group","makeGroup","translation","set","width","height","Vec","x","y","physics","lStickX","lStickY","updateRenderObjects","findInput","overrideKeyboardEvent","controllerIndex","a","angle","magnitude","i","keys","gamepads","gamepad","undefined","axes","Math","abs","buttons","pressed","atan2","sqrt","pow","length","j","e","keyCode","type","disabledEventPropagation","preventDefault","stopPropagation","event","cancelBubble"],"mappings":"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","file":"main.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap efd4b8095d5eefb01c32","import {player} from \"./player\";\r\nimport {physics} from \"./physics\";\r\nimport {updateRenderObjects} from \"./render\";\r\nimport {overrideKeyboardEvent, findInput} from \"./input\";\r\n\r\n// setting up renderer\r\nconst elem = document.getElementById(\"game\");\r\nconst params = {fullscreen : true};\r\nexport const two = new Two(params).appendTo(elem);\r\n\r\n// setting up player\r\nexport const p = new player();\r\n\r\n// setting up other variables\r\nlet playing = false;\r\nconst startPrompt = document.getElementById(\"startPrompt\");\r\n\r\nconsole.log(navigator.getGamepads());\r\n\r\n// defining the game logic loop\r\nfunction gameLoop() {\r\n  p.input.updateInput();\r\n  physics(p);\r\n  updateRenderObjects();\r\n  setTimeout(function(){gameLoop()}, 16.666667);\r\n}\r\n\r\n// when page is loaded and it asks for input\r\nfunction start() {\r\n  if (!playing) {\r\n    if (findInput(p)){\r\n      // start game logic and render loops\r\n      playing = true;\r\n      startPrompt.remove();\r\n      gameLoop();\r\n      two.play();\r\n    }\r\n    setTimeout(function(){start()}, 16.6666667);\r\n  }\r\n}\r\n\r\n// overriding keyboard events to disable unwanted events and store properly\r\ndocument.onkeydown = overrideKeyboardEvent;\r\ndocument.onkeyup = overrideKeyboardEvent;\r\n\r\nstart();\n\n\n// WEBPACK FOOTER //\n// ./js/main.js","import {Vec} from \"./utils/Vec\";\r\nimport {two} from \"./main\";\r\nimport {input} from \"./input\";\r\n\r\nexport function player() {\r\n  this.pos = new Vec();\r\n  this.vel = new Vec();\r\n\r\n  this.input = new input();\r\n\r\n  this.head = two.makeCircle(0, 0, 20);\r\n  this.head.fill = \"#ff8000\";\r\n  this.group = two.makeGroup(this.head);\r\n  this.group.translation.set(two.width/2, two.height/2);\r\n}\n\n\n// WEBPACK FOOTER //\n// ./js/player.js","export function Vec(x = 0, y = 0){\r\n  this.x = x;\r\n  this.y = y;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./js/utils/Vec.js","export function physics(p) {\r\n\r\n  p.vel.x = p.input.lStickX[0] * 5;\r\n  p.vel.y = p.input.lStickY[0] * 5;\r\n\r\n  p.pos.x += p.vel.x;\r\n  p.pos.y += p.vel.y;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./js/physics.js","import {p, two} from \"./main\";\r\n\r\nexport function updateRenderObjects() {\r\n  p.group.translation.set(two.width/2 + p.pos.x, two.height/2 + p.pos.y * -1);\r\n}\n\n\n// WEBPACK FOOTER //\n// ./js/render.js","export function input() {\r\n  this.controllerIndex = -1;\r\n  this.lStickX = [0];\r\n  this.lStickY = [0];\r\n  this.a = [false];\r\n\r\n  this.angle = [0];\r\n  this.magnitude = [0];\r\n\r\n  this.updateInput = function() {\r\n    // push inputs back a frame in history\r\n    for (let i=1;i<5;i++) {\r\n      this.lStickX[i] = this.lStickX[i-1];\r\n      this.lStickY[i] = this.lStickY[i-1];\r\n      this.a[i] = this.a[i-1];\r\n      this.angle[i] = this.angle[i-1];\r\n      this.magnitude[i] = this.magnitude[i-1];\r\n    }\r\n\r\n    // if using keyboard\r\n    if (this.controllerIndex === -1) {\r\n      this.lStickX[0] = ((keys[68] || keys[39]) ? 1 : 0) + ((keys[65] || keys[37]) ? -1 : 0);\r\n      this.lStickY[0] = ((keys[87] || keys[38]) ? 1 : 0) + ((keys[83] || keys[40]) ? -1 : 0);\r\n      this.a[0] = keys[32] || keys[90];\r\n    }\r\n    // else if using a gamepad\r\n    else {\r\n      const gamepads = navigator.getGamepads();\r\n      const gamepad = gamepads[this.controllerIndex];\r\n      // if gamepad is unplugged or removed. change to keyboard\r\n      if (gamepad === null || gamepad === undefined) {\r\n        this.controllerIndex = -1;\r\n      }\r\n      else {\r\n        this.lStickX[0] = gamepad.axes[0];\r\n        if (Math.abs(this.lStickX[0]) < 0.3) {\r\n          this.lStickX[0] = 0;\r\n        }\r\n        this.lStickY[0] = gamepad.axes[1] * -1;\r\n        if (Math.abs(this.lStickY[0]) < 0.3) {\r\n          this.lStickY[0] = 0;\r\n        }\r\n        this.a[0] = gamepad.buttons[0].pressed;\r\n      }\r\n    }\r\n\r\n    // calculate new inputs\r\n    this.angle[0] = Math.atan2(this.lStickY[0], this.lStickX[0]);\r\n    this.magnitude[0] = Math.sqrt(Math.pow(this.lStickX[0], 2) + Math.pow(this.lStickY[0], 2));\r\n  }\r\n}\r\n\r\nexport function findInput(p) {\r\n  // if enter or space is hit\r\n  if (keys[13] || keys[32]) {\r\n    p.input.controllerIndex = -1;\r\n    return true;\r\n  }\r\n  // else look for a button press on a gamepad\r\n  else {\r\n    const gamepads = navigator.getGamepads();\r\n    for (let i=0;i<gamepads.length;i++) {\r\n      for (let j=0;j<gamepads[i].buttons.length;j++) {\r\n        if (gamepads[i].buttons[j].pressed) {\r\n          p.input.controllerIndex = i;\r\n          return true;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return false;\r\n}\r\n\r\nexport const keys = {};\r\n\r\nexport function overrideKeyboardEvent (e){\r\n  // do this for all keys except f5 and f11\r\n  if (e.keyCode != 122 && e.keyCode != 116){\r\n    switch(e.type){\r\n      case \"keydown\":\r\n        if (!keys[e.keyCode]) {\r\n          keys[e.keyCode] = true;\r\n        }\r\n        break;\r\n      case \"keyup\":\r\n        delete(keys[e.keyCode]);\r\n        break;\r\n    }\r\n    disabledEventPropagation(e);\r\n    e.preventDefault();\r\n    return false;\r\n  } else {\r\n    return true;\r\n  }\r\n}\r\n\r\nfunction disabledEventPropagation (e){\r\n  if(e){\r\n    if(e.stopPropagation){\r\n      e.stopPropagation();\r\n    } else if(event){\r\n       event.cancelBubble = true;\r\n    }\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./js/input.js"],"sourceRoot":""}